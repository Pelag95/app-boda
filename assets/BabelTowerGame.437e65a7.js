import{s as O,u as U,r as h,o as D,c as V,w as B,a as r,b as u,d as a,t as n,n as f,F as j,g as _,v as E,x as g,T as y,e as G,f as R,p as I,D as M,y as S,m as k,z as Z,A as K,B as P,C as W,h as X,E as N}from"./index.4d4159a8.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";const C=w=>(P("data-v-992579d9"),w=w(),W(),w),q={class:"w-full flex flex-col pt-[60px] bg-white leading-tight"},ee={class:"bg-green p-6 flex flex-col justify-center items-center"},te={class:"text-black text-3xl font-bold text-center"},le=R('<div class="relative" data-v-992579d9><div class="custom-shape-divider-top-1728252536" data-v-992579d9><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" data-v-992579d9><path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" class="shape-fill" data-v-992579d9></path><path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" class="shape-fill" data-v-992579d9></path><path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" class="shape-fill" data-v-992579d9></path></svg></div></div>',1),ae={class:"mt-12 flex flex-col justify-center items-center px-4 text-center"},se={class:"text-lg text-center mt-2"},oe=C(()=>a("br",null,null,-1)),ne=C(()=>a("br",null,null,-1)),re={class:"font-bold text-2xl"},ce=C(()=>a("br",null,null,-1)),ie=C(()=>a("img",{src:X,alt:"title",class:"my-6 mx-auto w-1/2 rotate-180"},null,-1)),ue={class:"mt-3 flex flex-col justify-center items-center px-6 text-center mb-12"},de={class:"text-4xl"},he={class:"mt-2"},fe={class:"text-3xl mt-6"},ve={class:"w-full justify-center items-center flex flex-col"},pe=["innerHTML"],be={key:1,class:"mt-4 w-full flex flex-col justify-center items-center space-y-6 transition-all mb-[500px]"},_e=["id","onClick"],me={key:0,class:"absolute inset-0 w-full h-full"},we={class:"-mt-1.5"},xe={key:0,class:"w-full transition-all ease-in-out"},ge={class:"w-full flex justify-center items-center space-x-2"},ye=["placeholder","id","onFocus"],ke=["disabled","onClick"],Ce=["innerHTML"],$e={__name:"BabelTowerGame",setup(w){const{t:Q}=O(),H=U(),o=h(null),T=h([]),m=h(null),i=h([]),v=h(null),p=h(null),d=h(null),$=h(!1);D(async()=>{const t=localStorage.getItem("selectedUser");o.value=t?JSON.parse(t):null,o.value==null&&H.push("/babel-tower");const s=localStorage.getItem("findFrom");if(m.value=s?JSON.parse(s):null,await fetch("/users.json").then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{T.value=e.sort((c,l)=>c.name.localeCompare(l.name))}).catch(e=>{console.error("Hubo un problema con la carga del archivo:",e)}),o!=null&&o.value.nationality&&await fetch(`/question_${o==null?void 0:o.value.nationality}.json`).then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{i.value=e.filter(c=>c.only==null||c.only==""||c.only==m.value)}).catch(e=>{console.error("Hubo un problema con la carga del archivo:",e)}),i.value.length>0){for(let e=1;e<=15;e++)if(localStorage.getItem("q"+e)){let l=i.value.find(b=>b.id==e);l&&(l.success=!0)}}});const L=async t=>{p.value=null,v.value=t,await N();const s=document.getElementById("question-"+t);s&&s.scrollIntoView({behavior:"smooth",block:"center"})},z=async t=>{await N();const s=document.getElementById("answer-"+t);s&&s.scrollIntoView({behavior:"smooth",block:"center"})},A=async t=>{const s=T.value.find(e=>e.password==p.value);if(!s){d.value="babel.no_password";return}if(console.log(s),s.nationality!=m.value){d.value="babel.user_not_from_country";return}if(s["q"+t]==!0||s["q"+t]=="TRUE"||s["q"+t]==1){if(localStorage.setItem("q"+t,"true"),o!=null&&o.value.nationality&&await fetch(`/question_${o==null?void 0:o.value.nationality}.json`).then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{i.value=e}).catch(e=>{console.error("Hubo un problema con la carga del archivo:",e)}),i.value.length>0){for(let e=1;e<=25;e++)if(localStorage.getItem("q"+e)){let l=i.value.find(b=>b.id==e);l&&(l.success=!0,v.value=null)}}}else{d.value="babel.user_do_not_match";return}},F=V(()=>d.value?Q(d.value):"");B(d,t=>{t&&setTimeout(()=>{d.value=null},3e3)});const J=V(()=>i.value.filter(t=>t.success===!0).length);return B(J,t=>{t>=10&&($.value=!0)}),(t,s)=>{var e,c;return r(),u("div",q,[a("div",ee,[a("h1",te,n(t.$t("babel.title")),1)]),le,a("div",ae,[a("p",se,[f(n(t.$t("babel.player2"))+": ",1),a("strong",null,n((e=o.value)==null?void 0:e.name),1),f(". "),oe,f(" "+n(t.$t("babel.player3"))+": ",1),ne,a("span",re,n((c=o.value)==null?void 0:c.password),1),ce,f(" "+n(t.$t("babel.player4")),1)])]),ie,a("div",ue,[a("h3",de,n(t.$t("babel.whoswho")),1),a("p",he,[f(n(t.$t("babel.whoswho2"))+" ",1),a("strong",null,[m.value=="fr"?(r(),u(j,{key:0},[f(n(t.$t("fr")),1)],64)):_("",!0),m.value=="es"?(r(),u(j,{key:1},[f(n(t.$t("es")),1)],64)):_("",!0)]),f(" "+n(t.$t("babel.whoswho3")),1)]),a("h1",fe,n(i.value.filter(l=>l.success).length)+" / 10",1),$.value?(r(),E(y,{key:0},{default:g(()=>[a("div",ve,[$.value?(r(),E(I(M),{key:0,autoplay:"",class:"h-[300px] w-[300px] transition-all",src:"/winner.json"},null,8,["src"])):_("",!0),a("p",{class:"text-2xl",innerHTML:t.$t("babel.congrats")},null,8,pe)])]),_:1})):(r(),u("div",be,[(r(!0),u(j,null,G(i.value,(l,b)=>(r(),u("div",{class:S([[v.value==l.id?"bg-[#0C0E0B]":"bg-green",l.success?"bg-[#b7f0b7]":""],"py-3 px-3 w-full relative rounded-lg min-h-[75px] flex flex-col items-center justify-center"]),id:"question-"+l.id,key:b,onClick:x=>l.success?"":L(l.id)},[k(y,null,{default:g(()=>[l.success?(r(),u("div",me,[k(I(M),{autoplay:"",class:"h-[180px] w-[180px] absolute top-[-90px] right-[-40px] m-auto z-30 transition-all",src:"/check.json"},null,8,["src"])])):_("",!0)]),_:2},1024),a("div",{class:S([v.value==l.id?"bg-green text-black":"bg-[#0C0E0B] text-white","transition-all absolute rounded-full w-[30px] h-[30px] top-[-15px] left-[-15px] flex justify-center items-center text-xl"])},[a("span",we,n(b),1)],2),a("p",{class:S([v.value==l.id?"text-white":"text-black","text-xl leading-tight px-6 font-bold"])},n(l.question),3),k(y,null,{default:g(()=>[l.id==v.value?(r(),u("div",xe,[a("div",ge,[Z(a("input",{"onUpdate:modelValue":s[0]||(s[0]=x=>p.value=x),placeholder:t.$t("babel.writeanswer"),name:"answer",class:"font-bold w-full resize-none border-b border-white bg-transparent pt-4 pb-1.5 text-lg text-white outline outline-0 transition-all placeholder-shown:border-white focus:border-r-emerald-500 focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-50",id:"answer-"+l.id,onFocus:x=>z(l.id)},null,40,ye),[[K,p.value]]),a("button",{class:"bg-green text-black font-bold text-xl rounded-lg p-2 ml-2 disabled:opacity-20 transition-all ease-in",disabled:p.value==null||p.value=="",onClick:x=>A(l.id)},n(t.$t("babel.validate")),9,ke)]),k(y,null,{default:g(()=>[d.value?(r(),u("div",{key:0,class:"w-full text-start text-red-400 transition-all",innerHTML:F.value},null,8,Ce)):_("",!0)]),_:1})])):_("",!0)]),_:2},1024)],10,_e))),128))]))])])}}},Te=Y($e,[["__scopeId","data-v-992579d9"]]);export{Te as default};
