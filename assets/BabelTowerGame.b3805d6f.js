import{v as F,u as J,r as u,o as U,c as T,w as V,a as c,b as h,d as s,t as n,n as m,m as $,x,T as w,F as D,e as G,f as R,q as B,D as E,g,y as C,p as y,z as Z,A as K,B as P,C as W,k as X,E as I}from"./index.3df1fb0d.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";const j=_=>(P("data-v-ec8f84b0"),_=_(),W(),_),q={class:"w-full flex flex-col pt-[60px] bg-white leading-tight"},ee={class:"bg-green p-6 flex flex-col justify-center items-center"},te={class:"text-black text-3xl font-bold text-center"},le=R('<div class="relative" data-v-ec8f84b0><div class="custom-shape-divider-top-1728252536" data-v-ec8f84b0><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none" data-v-ec8f84b0><path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" class="shape-fill" data-v-ec8f84b0></path><path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" class="shape-fill" data-v-ec8f84b0></path><path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" class="shape-fill" data-v-ec8f84b0></path></svg></div></div>',1),se={class:"mt-12 flex flex-col justify-center items-center px-4 text-center"},ae={class:"text-lg text-center mt-2"},oe=j(()=>s("br",null,null,-1)),ne=j(()=>s("br",null,null,-1)),re={class:"my-4"},ce={class:"font-bold text-2xl bg-green rounded-lg shadow-md px-4 py-2"},ie=j(()=>s("img",{src:X,alt:"title",class:"my-6 mx-auto w-1/2 rotate-180"},null,-1)),ue={class:"mt-3 flex flex-col justify-center items-center px-6 text-center mb-12"},de={class:"text-4xl"},fe={class:"mt-2"},he={class:"text-3xl mt-6"},ve={class:"w-full justify-center items-center flex flex-col"},be=["innerHTML"],pe={key:1,class:"mt-4 w-full flex flex-col justify-center items-center space-y-6 transition-all mb-[200px]"},_e=["id","onClick"],me={key:0,class:"absolute inset-0 w-full h-full"},xe={class:"-mt-1.5"},we={key:0,class:"w-full transition-all ease-in-out"},ge={class:"w-full flex justify-center items-center space-x-2"},ye=["placeholder","id","onFocus"],ke=["disabled","onClick"],Ce=["innerHTML"],je={__name:"BabelTowerGame",setup(_){const{t:M}=F(),N=J(),a=u(null),S=u([]),Q=u(null),r=u([]),v=u(null),b=u(null),d=u(null),k=u(!1);U(async()=>{const t=localStorage.getItem("selectedUser");a.value=t?JSON.parse(t):null,a.value==null&&N.push("/babel-tower");const o=localStorage.getItem("findFrom");if(Q.value=o?JSON.parse(o):null,await fetch("/users.json").then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{S.value=e.sort((p,l)=>p.full_name.localeCompare(l.full_name))}).catch(e=>{console.error("Hubo un problema con la carga del archivo:",e)}),a!=null&&a.value.nationality&&await fetch(`/question_${a==null?void 0:a.value.nationality}.json`).then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{r.value=e}).catch(e=>{console.error("Hubo un problema con la carga del archivo:",e)}),r.value.length>0){for(let e=1;e<=15;e++)if(localStorage.getItem("q"+e)){let l=r.value.find(i=>i.id==e);l&&(l.success=!0)}}});const H=async t=>{b.value=null,v.value=t,await I();const o=document.getElementById("question-"+t);o&&o.scrollIntoView({behavior:"smooth",block:"center"})},L=async t=>{await I();const o=document.getElementById("answer-"+t);o&&o.scrollIntoView({behavior:"smooth",block:"center"})},O=async t=>{const o=S.value.find(e=>e.password==b.value);if(!o){d.value="babel.no_password";return}if(o["q"+t]==!0||o["q"+t]=="TRUE"||o["q"+t]==1){if(localStorage.setItem("q"+t,"true"),a!=null&&a.value.nationality&&await fetch(`/question_${a==null?void 0:a.value.nationality}.json`).then(e=>{if(!e.ok)throw new Error("Error al cargar el archivo JSON");return e.json()}).then(e=>{r.value=e}).catch(e=>{console.error("Hubo un problema con la carga del archivo:",e)}),r.value.length>0){for(let e=1;e<=25;e++)if(localStorage.getItem("q"+e)){let l=r.value.find(i=>i.id==e);l&&(l.success=!0,v.value=null)}}}else{d.value="babel.user_do_not_match";return}},z=T(()=>d.value?M(d.value):"");V(d,t=>{t&&setTimeout(()=>{d.value=null},3e3)});const A=T(()=>r.value.filter(t=>t.success===!0).length);return V(A,t=>{t>=10&&(k.value=!0)}),(t,o)=>{var e,p;return c(),h("div",q,[s("div",ee,[s("h1",te,n(t.$t("babel.title")),1)]),le,s("div",se,[s("div",ae,[m(n(t.$t("babel.player2"))+": ",1),s("strong",null,n((e=a.value)==null?void 0:e.full_name),1),m(". "),oe,m(" "+n(t.$t("babel.player3"))+": ",1),ne,s("div",re,[s("span",ce,n((p=a.value)==null?void 0:p.password),1)]),m(" "+n(t.$t("babel.player4")),1)])]),ie,s("div",ue,[s("h3",de,n(t.$t("babel.whoswho")),1),s("p",fe,n(t.$t("babel.whoswho2"))+" "+n(t.$t("babel.whoswho3")),1),s("h1",he,n(r.value.filter(l=>l.success).length)+" / 10",1),k.value?(c(),$(w,{key:0},{default:x(()=>[s("div",ve,[k.value?(c(),$(B(E),{key:0,autoplay:"",class:"h-[300px] w-[300px] transition-all",src:"/winner.json"},null,8,["src"])):g("",!0),s("p",{class:"text-2xl",innerHTML:t.$t("babel.congrats")},null,8,be)])]),_:1})):(c(),h("div",pe,[(c(!0),h(D,null,G(r.value.sort((l,i)=>{const f=[2,5,3,4,6,1,7,15,8,14,11,13,9,12,10];return f.indexOf(l.id)-f.indexOf(i.id)}),(l,i)=>(c(),h("div",{class:C([[v.value==l.id?"bg-[#0C0E0B]":"bg-green",l.success?"bg-[#b7f0b7]":""],"py-3 px-3 w-full relative rounded-lg min-h-[75px] flex flex-col items-center justify-center"]),id:"question-"+l.id,key:i++,onClick:f=>l.success?"":H(l.id)},[y(w,null,{default:x(()=>[l.success?(c(),h("div",me,[y(B(E),{autoplay:"",class:"h-[180px] w-[180px] absolute top-[-90px] right-[-40px] m-auto z-30 transition-all",src:"/check.json"},null,8,["src"])])):g("",!0)]),_:2},1024),s("div",{class:C([v.value==l.id?"bg-green text-black":"bg-[#0C0E0B] text-white","transition-all absolute rounded-full w-[30px] h-[30px] top-[-15px] left-[-15px] flex justify-center items-center text-xl"])},[s("span",xe,n(i),1)],2),s("p",{class:C([v.value==l.id?"text-white":"text-black","text-xl leading-tight px-6 font-bold"])},n(l.question),3),y(w,null,{default:x(()=>[l.id==v.value?(c(),h("div",we,[s("div",ge,[Z(s("input",{"onUpdate:modelValue":o[0]||(o[0]=f=>b.value=f),placeholder:t.$t("babel.writeanswer"),name:"answer",class:"font-bold w-full resize-none border-b border-white bg-transparent pt-4 pb-1.5 text-lg text-white outline outline-0 transition-all placeholder-shown:border-white focus:border-r-emerald-500 focus:outline-0 disabled:resize-none disabled:border-0 disabled:bg-blue-gray-50",id:"answer-"+l.id,onFocus:f=>L(l.id)},null,40,ye),[[K,b.value]]),s("button",{class:"bg-green text-black font-bold text-xl rounded-lg p-2 ml-2 disabled:opacity-20 transition-all ease-in",disabled:b.value==null||b.value=="",onClick:f=>O(l.id)},n(t.$t("babel.validate")),9,ke)]),y(w,null,{default:x(()=>[d.value?(c(),h("div",{key:0,class:"w-full text-start text-red-400 transition-all",innerHTML:z.value},null,8,Ce)):g("",!0)]),_:1})])):g("",!0)]),_:2},1024)],10,_e))),128))]))])])}}},Ve=Y(je,[["__scopeId","data-v-ec8f84b0"]]);export{Ve as default};
